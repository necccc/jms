#!/bin/bash

start() {

    pm2 start processes.json
    node lib/monitor.js &
    echo $! > pid/monitoring.pid
}

stop() {

    pm2 delete processes.json
    PID=$(cat pid/monitoring.pid)
    kill -9 $PID

}

deploy () {

	node bin/jms-deploy.js

}

restart () {

    pm2 restart processes.json

}

status () {

    node bin/status.js

}


case "$1" in
	start)
		start
	;;
	stop)
		stop
	;;
	status)
		status
	;;
	deploy)
		deploy
	;;
	restart|reload)
		restart
	;;
*)
	echo $"Usage: $0 {start|stop|restart|deploy|status}"
	exit 1
esac
exit 0
